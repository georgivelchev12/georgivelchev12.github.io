"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var controller={initController:function(){controller.maquetteFunct(),controller.phostoSwipeFunct(),controller.fullScreenFunct(),controller.hammerFunct($(".threesixty")[0])},maquetteFunct:function(){var e=$(".sidebar").height()-340;$(".inline-vertical-btn > div").css("max-height",e),$(window).resize(function(){e=$(".sidebar").height()-340,$(".inline-vertical-btn > div").css("max-height",e)});var t=$("#image_size")[0],n=t.naturalWidth,i=t.naturalHeight,a=$(".container-360").width(),l=a*i/n;$(".container-360").height()<l&&(l=$(".container-360").height(),a=l*n/i);var o=$(".maquette").ThreeSixty({totalFrames:61,endFrame:61,currentFrame:1,imgList:".threesixty_images",progress:".loader",imagePath:"uploads/1_PiÃ©ton/360/",filePrefix:"",ext:".jpg",height:l,width:a,navigation:!1,responsive:!1});$(".custom_play").bind("click",function(){o.play()}),$(".custom_stop").bind("click",function(){o.stop()}),$(".container-360").height()<l&&(l=$(".container-360").height(),a=l*n/i);var r=l,m=a;$(window).resize(function(){a=$(".container-360").width(),l=a*i/n,$(".container-360").height()<l&&(l=$(window).height(),a=l*n/i),$(".maquette,.maquette img").height(l),$(".maquette,.maquette img").width(a)}),$(".custom_zoomp").on("click",function(){l=1.2*$(".maquette img").height(),a=1.2*$(".maquette img").width(),3*r<l&&(l=3*r,a=3*m),$(".maquette,.maquette img").height(l),$(".maquette,.maquette img").width(a)}),$(".custom_zoomm").on("click",function(){l=$(".maquette img").height()/1.2,a=$(".maquette img").width()/1.2,l<r&&(l=r,a=m),$(".maquette,.maquette img").height(l),$(".maquette,.maquette img").width(a)}),$(".custom_zoomp,.custom_zoomm").on("click",function(){var e=($(".maquette img").height()-$(".container-360").height())/2+60,t=($(".maquette img").width()-$(".container-360").width())/2;$("html,body").animate({scrollTop:e,scrollLeft:t},0)});$(".threesixty").on("wheel",function(e){if(e.preventDefault(),e.originalEvent.deltaY<0){l=1.2*$(".maquette img").height(),a=1.2*$(".maquette img").width(),3*r<l&&(l=3*r,a=3*m),$(".maquette,.maquette img").height(l),$(".maquette,.maquette img").width(a);var t=($(".maquette img").height()-$(".container-360").height())/2+60,n=($(".maquette img").width()-$(".container-360").width())/2;$("html,body").animate({scrollTop:t,scrollLeft:n},0)}else{l=$(".maquette img").height()/1.2,a=$(".maquette img").width()/1.2,l<r&&(l=r,a=m),$(".maquette,.maquette img").height(l),$(".maquette,.maquette img").width(a);var i=($(".maquette img").height()-$(".container-360").height())/2+60,o=($(".maquette img").width()-$(".container-360").width())/2;$("html,body").animate({scrollTop:i,scrollLeft:o},0)}})},phostoSwipeFunct:function(){function t(){var e=document.querySelectorAll(".pswp")[0],t=new PhotoSwipe(e,PhotoSwipeUI_Default,[{src:"/uploads/galerie/images/r2.jpg",w:964,h:824},{src:"/uploads/galerie/images/r1.jpg",w:964,h:824},{src:"/uploads/galerie/images/interior.jpg",w:964,h:824}],{history:!1,focus:!1,showAnimationDuration:0,hideAnimationDuration:0,getDoubleTapZoom:function(e,t){return e?3:t.initialZoomLevel<.7?4:1.33},maxSpreadZoom:3});t.init(),t.invalidateCurrItems(),t.updateSize(!0)}function e(e){return document.getElementById(e).addEventListener("click",t)}e("openGalery1"),e("openGalery2")},fullScreenFunct:function(){_toConsumableArray(document.getElementsByClassName("full-screen-btn")).forEach(function(e){var t=window.innerWidth;e.addEventListener("click",function(){document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen?(document.getElementsByClassName("container-360")[0].style.paddingLeft="0px",document.getElementsByClassName("removeOnFullScr")[0].style.borderBottom="none",document.getElementsByClassName("sidebar")[0].setAttribute("style","z-index:auto;position:absolute;border-right:none;"),document.getElementsByClassName("scroll-menu")[0].setAttribute("style","position:fixed;left:2%;display:block;z-index:10;"),_toConsumableArray(document.getElementsByClassName("removeAndAddEl")).forEach(function(e){return e.style.display="none"}),_toConsumableArray(document.getElementsByClassName("d-flexOnFullScreen")).forEach(function(e){e.style.display="flex",e.style.flexDirection="column"}),document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen&&document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)):(t<=1001&&(document.getElementsByClassName("container-360")[0].style.paddingLeft="0"),document.getElementsByClassName("container-360")[0].style.paddingLeft="300px",document.getElementsByClassName("removeOnFullScr")[0].style.borderBottom="1px solid #ccc",document.getElementsByClassName("sidebar")[0].setAttribute("style","z-index:9;position:fixed;border-right:1px solid #ccc;"),document.getElementsByClassName("scroll-menu")[0].setAttribute("style","position:relative;left:auto;display:block;z-index:auto"),_toConsumableArray(document.getElementsByClassName("removeAndAddEl")).forEach(function(e){return e.style.display="block"}),_toConsumableArray(document.getElementsByClassName("d-flexOnFullScreen")).forEach(function(e){return e.style.display="block"}),document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen())})})},hammerFunct:function(e){var t=new Hammer(e,{});t.get("pinch").set({enable:!0});var n=0,i=0,o=1,a=1,l=0,r=0,m=0,c=0,u="",s=e;t.on("doubletap pinch pinchend",function(e){if("doubletap"==e.type){u="translate3d(0, 0, 0) scale3d(2, 2, 1) ",a=o=2;try{"matrix(1, 0, 0, 1, 0, 0)"!=window.getComputedStyle(s,null).getPropertyValue("-webkit-transform").toString()&&(u="translate3d(0, 0, 0) scale3d(1, 1, 1) ",a=o=1)}catch(e){}s.style.webkitTransform=u,u=""}1!=o&&(n=l+e.deltaX,i=r+e.deltaY,m=Math.ceil((o-1)*s.clientWidth/2),c=Math.ceil((o-1)*s.clientHeight/2),m<n&&(n=m),n<-m&&(n=-m),c<i&&(i=c),i<-c&&(i=-c)),"pinch"==e.type&&(o=Math.max(.999,Math.min(a*e.scale,4))),"pinchend"==e.type&&(a=o),"panend"==e.type&&(l=n<m?n:m,r=i<c?i:c),1!=o&&(u="translate3d("+n+"px,"+i+"px, 0) scale3d("+o+", "+o+", 1)"),u&&(s.style.webkitTransform=u)})}};window.addEventListener("load",function(){return controller.initController()});