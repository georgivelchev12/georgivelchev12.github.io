"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var controller={initController:function(){controller.maquetteFunct(),controller.phostoSwipeFunct(),controller.fullScreenFunct(),controller.hammerFunct($(".threesixty")[0])},maquetteFunct:function(){var e=$(".sidebar").height()-340;$(".inline-vertical-btn > div").css("max-height",e),$(window).resize(function(){e=$(".sidebar").height()-340,$(".inline-vertical-btn > div").css("max-height",e)});var t,n,i=$("#image_size")[0],o=i.naturalWidth,a=i.naturalHeight,l=$(".container-360").width(),r=l*a/o;$(".container-360").height()<r&&(r=$(".container-360").height(),l=r*o/a),document.querySelectorAll(".btn.active").forEach(function(e){"PIÉTON"==e.textContent?n="WALK":"AÉRIEN"==e.textContent&&(n="AERIAL")}),t=$(".maquette").ThreeSixty({totalFrames:61,endFrame:61,currentFrame:1,imgList:".threesixty_images",progress:".loader",imagePath:"uploadsConverted/".concat(n,"/"),filePrefix:"",ext:".jpg",height:r,width:l,navigation:!1,responsive:!1}),$(".custom_play").bind("click",function(){t.play()}),$(".custom_stop").bind("click",function(){t.stop()}),$(".container-360").height()<r&&(r=$(".container-360").height(),l=r*o/a);var c=r,m=l;$(window).resize(function(){l=$(".container-360").width(),r=l*a/o,$(".container-360").height()<r&&(r=$(window).height(),l=r*o/a),$(".maquette,.maquette img").height(r),$(".maquette,.maquette img").width(l)}),$(".custom_zoomp").on("click",function(){r=1.2*$(".maquette img").height(),l=1.2*$(".maquette img").width(),3*c<r&&(r=3*c,l=3*m),$(".maquette,.maquette img").height(r),$(".maquette,.maquette img").width(l)}),$(".custom_zoomm").on("click",function(){r=$(".maquette img").height()/1.2,l=$(".maquette img").width()/1.2,r<c&&(r=c,l=m),$(".maquette,.maquette img").height(r),$(".maquette,.maquette img").width(l)}),$(".custom_zoomp,.custom_zoomm").on("click",function(){var e=($(".maquette img").height()-$(".container-360").height())/2+60,t=($(".maquette img").width()-$(".container-360").width())/2;$("html,body").animate({scrollTop:e,scrollLeft:t},0)});$(".threesixty").on("wheel",function(e){if(e.preventDefault(),e.originalEvent.deltaY<0){r=1.2*$(".maquette img").height(),l=1.2*$(".maquette img").width(),3*c<r&&(r=3*c,l=3*m),$(".maquette,.maquette img").height(r),$(".maquette,.maquette img").width(l);var t=($(".maquette img").height()-$(".container-360").height())/2+60,n=($(".maquette img").width()-$(".container-360").width())/2;$("html,body").animate({scrollTop:t,scrollLeft:n},0)}else{r=$(".maquette img").height()/1.2,l=$(".maquette img").width()/1.2,r<c&&(r=c,l=m),$(".maquette,.maquette img").height(r),$(".maquette,.maquette img").width(l);var i=($(".maquette img").height()-$(".container-360").height())/2+60,o=($(".maquette img").width()-$(".container-360").width())/2;$("html,body").animate({scrollTop:i,scrollLeft:o},0)}})},phostoSwipeFunct:function(){function e(){var e=document.querySelectorAll(".pswp")[0],t=new PhotoSwipe(e,PhotoSwipeUI_Default,[{src:"/uploadsConverted/galerie/images/r2.jpg",w:964,h:824},{src:"/uploadsConverted/galerie/images/r1.jpg",w:964,h:824},{src:"/uploadsConverted/galerie/images/interior.jpg",w:964,h:824}],{history:!1,focus:!1,showAnimationDuration:0,hideAnimationDuration:0,getDoubleTapZoom:function(e,t){return e?3:t.initialZoomLevel<.7?4:1.33},maxSpreadZoom:3});t.init(),t.invalidateCurrItems(),t.updateSize(!0)}var t;t="openGalery1",document.getElementById(t).addEventListener("click",e)},fullScreenFunct:function(){_toConsumableArray(document.getElementsByClassName("full-screen-btn")).forEach(function(e){var t=window.innerWidth;e.addEventListener("click",function(){document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen?(document.getElementsByClassName("container-360")[0].style.paddingLeft="0px",document.getElementsByClassName("sidebar")[0].setAttribute("style","z-index:auto;position:absolute;border-right:none;justify-content:center;"),document.getElementsByClassName("scroll-menu")[0].setAttribute("style","position:fixed;left:2%;display:block;z-index:10;padding:0;"),_toConsumableArray(document.getElementsByClassName("removeAndAddEl")).forEach(function(e){return e.style.display="none"}),_toConsumableArray(document.getElementsByClassName("d-flexOnFullScreen")).forEach(function(e){e.style.display="flex",e.style.flexDirection="column"}),document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen&&document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)):(t<=1001&&(document.getElementsByClassName("container-360")[0].style.paddingLeft="0"),document.getElementsByClassName("container-360")[0].style.paddingLeft="300px",document.getElementsByClassName("sidebar")[0].setAttribute("style","z-index:9;position:fixed;border-right:1px solid #ccc;justify-content:space-between"),document.getElementsByClassName("scroll-menu")[0].setAttribute("style","position:relative;left:auto;display:block;z-index:auto;"),_toConsumableArray(document.getElementsByClassName("removeAndAddEl")).forEach(function(e){return e.style.display="block"}),_toConsumableArray(document.getElementsByClassName("d-flexOnFullScreen")).forEach(function(e){return e.style.display="block"}),document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen())})})},hammerFunct:function(e){var t=new Hammer(e,{});t.get("pinch").set({enable:!0});var n=0,i=0,o=1,a=1,l=0,r=0,c=0,m=0,u="",s=e;t.on("doubletap pinch pinchend",function(e){if("doubletap"==e.type){u="translate3d(0, 0, 0) scale3d(2, 2, 1) ",a=o=2;try{"matrix(1, 0, 0, 1, 0, 0)"!=window.getComputedStyle(s,null).getPropertyValue("-webkit-transform").toString()&&(u="translate3d(0, 0, 0) scale3d(1, 1, 1) ",a=o=1)}catch(e){}s.style.webkitTransform=u,u=""}1!=o&&(n=l+e.deltaX,i=r+e.deltaY,c=Math.ceil((o-1)*s.clientWidth/2),m=Math.ceil((o-1)*s.clientHeight/2),c<n&&(n=c),n<-c&&(n=-c),m<i&&(i=m),i<-m&&(i=-m)),"pinch"==e.type&&(o=Math.max(.999,Math.min(a*e.scale,4))),"pinchend"==e.type&&(a=o),"panend"==e.type&&(l=n<c?n:c,r=i<m?i:m),1!=o&&(u="translate3d("+n+"px,"+i+"px, 0) scale3d("+o+", "+o+", 1)"),u&&(s.style.webkitTransform=u)})}};window.addEventListener("load",function(){return controller.initController()});