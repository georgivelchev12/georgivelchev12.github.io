"use strict";var maquette,controller={initController:function(){controller.maquetteFunct()},maquetteFunct:function(){var e=$(".image_size")[0],n=e.naturalWidth,i=e.naturalHeight,a=$(".container-360").width(),c=a*i/n;$(".container-360").height()<c&&(c=$(".container-360").height(),a=c*n/i),maquette=$(".maquette").ThreeSixty({totalFrames:61,endFrame:61,currentFrame:1,imgList:".threesixty_images",progress:".bluredImg",imagePath:"uploads/WALK/",filePrefix:"",ext:".jpg",height:c,width:a,navigation:!1,responsive:!1,disableSpin:!0,onReady:function(){controller.dropdownMenu(),controller.phostoSwipeFunct(),controller.fullScreenFunct(),controller.hammerFunct($(".threesixty")[0]),controller.removeHoverOnMobile()}}),$(".maq-change").click(function(e){a=$(".container-360").width(),c=a*i/n,$(".container-360").height()<c&&(c=$(window).height(),a=c*n/i),$(".maquette,.maquette img").height(c),$(".maquette,.maquette img").width(a);var t=$(e.target).attr("data-maquette");$(".loader")[0].style.display="block",maquette=$(".maquette").ThreeSixty({totalFrames:61,endFrame:61,currentFrame:1,imgList:".threesixty_images",progress:".loader",imagePath:"uploads/".concat(t,"/"),filePrefix:"",ext:".jpg",height:c,width:a,navigation:!1,responsive:!1,disableSpin:!0}),$(".maq-change").removeClass("active"),$("a[data-maquette ="+t+"]").addClass("active")}),$(".custom_play").bind("click",function(){maquette.play()}),$(".custom_stop").bind("click",function(){maquette.stop()}),$(".container-360").height()<c&&(c=$(".container-360").height(),a=c*n/i);var r=c,u=a;$(window).resize(function(){a=$(".container-360").width(),c=a*i/n,$(".container-360").height()<c&&(c=$(window).height(),a=c*n/i),$(".maquette,.maquette img").height(c),$(".maquette,.maquette img").width(a)}),$(".custom_zoomp").on("click",function(){c=1.2*$(".maquette img").height(),a=1.2*$(".maquette img").width(),3*r<c&&(c=3*r,a=3*u),$(".maquette,.maquette img").height(c),$(".maquette,.maquette img").width(a)}),$(".custom_zoomm").on("click",function(){c=$(".maquette img").height()/1.2,a=$(".maquette img").width()/1.2,c<r&&(c=r,a=u),$(".maquette,.maquette img").height(c),$(".maquette,.maquette img").width(a)}),$(".custom_zoomp,.custom_zoomm").on("click",function(){var e=($(".maquette img").height()-$(".container-360").height())/2+60,t=($(".maquette img").width()-$(".container-360").width())/2;$("html,body").animate({scrollTop:e,scrollLeft:t},0)});$(".threesixty").on("wheel",function(e){if(e.preventDefault(),e.originalEvent.deltaY<0){c=1.2*$(".maquette img").height(),a=1.2*$(".maquette img").width(),3*r<c&&(c=3*r,a=3*u),$(".maquette,.maquette img").height(c),$(".maquette,.maquette img").width(a);var t=($(".maquette img").height()-$(".container-360").height())/2+60,n=($(".maquette img").width()-$(".container-360").width())/2;$("html,body").animate({scrollTop:t,scrollLeft:n},0)}else{c=$(".maquette img").height()/1.2,a=$(".maquette img").width()/1.2,c<r&&(c=r,a=u),$(".maquette,.maquette img").height(c),$(".maquette,.maquette img").width(a);var i=($(".maquette img").height()-$(".container-360").height())/2+60,o=($(".maquette img").width()-$(".container-360").width())/2;$("html,body").animate({scrollTop:i,scrollLeft:o},0)}})},phostoSwipeFunct:function(){document.getElementById("openGalery1").addEventListener("click",function(){var e=document.querySelectorAll(".pswp")[0],t=new PhotoSwipe(e,PhotoSwipeUI_Default,[{src:"/uploads/galerie/images/r2.jpg",w:1800,h:1200},{src:"/uploads/galerie/images/r1.jpg",w:1800,h:1200},{src:"/uploads/galerie/images/interior.jpg",w:1800,h:1200}],{history:!1,focus:!1,showAnimationDuration:0,hideAnimationDuration:0,getDoubleTapZoom:function(e,t){return e?3:t.initialZoomLevel<.7?4:1.33},maxSpreadZoom:3});t.init(),t.invalidateCurrItems(),t.updateSize(!0)})},fullScreenFunct:function(){document.querySelector(".full-screen-btn").addEventListener("click",function(){document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen?document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen&&document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()})},hammerFunct:function(e){var t=new Hammer(e,{});t.get("pinch").set({enable:!0});var n=0,i=0,o=1,a=1,c=0,r=0,u=0,m=0,l="",d=e;t.on("doubletap pinch pinchend pinchstart",function(e){var t={pinch:function(){o=Math.max(.999,Math.min(a*e.scale,4))},pinchstart:function(){},pinchend:function(){a=o},doubletap:function(){l="translate3d(0, 0, 0) scale3d(2, 2, 1) ",a=o=2;try{"matrix(1, 0, 0, 1, 0, 0)"!=window.getComputedStyle(d,null).getPropertyValue("-webkit-transform").toString()&&(l="translate3d(0, 0, 0) scale3d(1, 1, 1) ",a=o=1)}catch(e){}d.style.webkitTransform=l,l=""},panend:function(){c=n<u?n:u,r=i<m?i:m}};document.querySelectorAll(".maq-change").forEach(function(e){e.addEventListener("click",function(){d.style.webkitTransform="translate3d(0, 0, 0) scale3d(1, 1, 1) ",l=""})}),t[e.type](),1!=o&&(n=c+e.deltaX,i=r+e.deltaY,u=Math.ceil((o-1)*d.clientWidth/2),m=Math.ceil((o-1)*d.clientHeight/2),u<n&&(n=u),n<-u&&(n=-u),m<i&&(i=m),i<-m&&(i=-m),l="translate3d("+n+"px,"+i+"px, 0) scale3d("+o+", "+o+", 1)"),l&&(d.style.webkitTransform=l)})},dropdownMenu:function(){document.querySelector(".btn-showMore").addEventListener("click",function(e){var t=e.currentTarget.parentElement;t.classList.contains("active-dropdown")?t.classList.remove("active-dropdown"):t.classList.add("active-dropdown")})},removeHoverOnMobile:function(){if("ontouchstart"in document.documentElement||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints)try{for(var e in document.styleSheets){var t=document.styleSheets[e];if(t.rules)for(var n=t.rules.length-1;0<=n;n--)t.rules[n].selectorText&&t.rules[n].selectorText.match(":hover")&&t.deleteRule(n)}}catch(e){}}};document.addEventListener("DOMContentLoaded",function(){return controller.initController()});