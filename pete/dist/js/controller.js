"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var controller={initController:function(){controller.maquetteFunct(),controller.phostoSwipeFunct(),controller.fullScreenFunct(),controller.hammerFunct($(".threesixty")[0]),controller.sideNavToggler()},maquetteFunct:function(){var e=$(".sidebar").height()-340;$(".inline-vertical-btn > div").css("max-height",e),$(window).resize(function(){e=$(".sidebar").height()-340,$(".inline-vertical-btn > div").css("max-height",e)});var n,t=$("#image_size")[0],i=t.naturalWidth,a=t.naturalHeight,o=$(".container-360").width(),l=o*a/i;$(".container-360").height()<l&&(l=$(".container-360").height(),o=l*i/a),n=$(".maquette").ThreeSixty({totalFrames:61,endFrame:61,currentFrame:1,imgList:".threesixty_images",progress:".loader",imagePath:"uploadsConverted/WALK/",filePrefix:"",ext:".jpg",height:l,width:o,navigation:!1,responsive:!1}),$(".maq-change").click(function(e){var t=$(e.target).attr("data-maquette");$(".loader").animate({opacity:1},50),$(".loader").animate({opacity:0},500),n=$(".maquette").ThreeSixty({totalFrames:61,endFrame:61,currentFrame:1,imgList:".threesixty_images",progress:".loader",imagePath:"uploadsConverted/".concat(t,"/"),filePrefix:"",ext:".jpg",height:l,width:o,navigation:!1,responsive:!1}),$(".maq-change").removeClass("active"),$("a[data-maquette ="+t+"]").addClass("active")}),$(".custom_play").bind("click",function(){n.play()}),$(".custom_stop").bind("click",function(){n.stop()}),$(".container-360").height()<l&&(l=$(".container-360").height(),o=l*i/a);var r=l,c=o;$(window).resize(function(){o=$(".container-360").width(),l=o*a/i,$(".container-360").height()<l&&(l=$(window).height(),o=l*i/a),$(".maquette,.maquette img").height(l),$(".maquette,.maquette img").width(o)}),$(".custom_zoomp").on("click",function(){l=1.2*$(".maquette img").height(),o=1.2*$(".maquette img").width(),3*r<l&&(l=3*r,o=3*c),$(".maquette,.maquette img").height(l),$(".maquette,.maquette img").width(o)}),$(".custom_zoomm").on("click",function(){l=$(".maquette img").height()/1.2,o=$(".maquette img").width()/1.2,l<r&&(l=r,o=c),$(".maquette,.maquette img").height(l),$(".maquette,.maquette img").width(o)}),$(".custom_zoomp,.custom_zoomm").on("click",function(){var e=($(".maquette img").height()-$(".container-360").height())/2+60,t=($(".maquette img").width()-$(".container-360").width())/2;$("html,body").animate({scrollTop:e,scrollLeft:t},0)});$(".threesixty").on("wheel",function(e){if(e.preventDefault(),e.originalEvent.deltaY<0){l=1.2*$(".maquette img").height(),o=1.2*$(".maquette img").width(),3*r<l&&(l=3*r,o=3*c),$(".maquette,.maquette img").height(l),$(".maquette,.maquette img").width(o);var t=($(".maquette img").height()-$(".container-360").height())/2+60,n=($(".maquette img").width()-$(".container-360").width())/2;$("html,body").animate({scrollTop:t,scrollLeft:n},0)}else{l=$(".maquette img").height()/1.2,o=$(".maquette img").width()/1.2,l<r&&(l=r,o=c),$(".maquette,.maquette img").height(l),$(".maquette,.maquette img").width(o);var i=($(".maquette img").height()-$(".container-360").height())/2+60,a=($(".maquette img").width()-$(".container-360").width())/2;$("html,body").animate({scrollTop:i,scrollLeft:a},0)}})},phostoSwipeFunct:function(){document.getElementById("openGalery1").addEventListener("click",function(){var e=document.querySelectorAll(".pswp")[0],t=new PhotoSwipe(e,PhotoSwipeUI_Default,[{src:"/uploadsConverted/galerie/images/r2.jpg",w:1800,h:1200},{src:"/uploadsConverted/galerie/images/r1.jpg",w:1800,h:1200},{src:"/uploadsConverted/galerie/images/interior.jpg",w:1800,h:1200}],{history:!1,focus:!1,showAnimationDuration:0,hideAnimationDuration:0,getDoubleTapZoom:function(e,t){return e?3:t.initialZoomLevel<.7?4:1.33},maxSpreadZoom:3});t.init(),t.invalidateCurrItems(),t.updateSize(!0)})},fullScreenFunct:function(){_toConsumableArray(document.getElementsByClassName("full-screen-btn")).forEach(function(e){var t=window.innerWidth;e.addEventListener("click",function(){document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen?(document.getElementsByClassName("container-360")[0].style.paddingLeft="0px",document.getElementsByClassName("sidebar")[0].setAttribute("style","z-index:auto;position:absolute;border-right:none;justify-content:center;"),document.getElementsByClassName("scroll-menu")[0].setAttribute("style","position:fixed;left:2%;display:block;z-index:10;padding:0;"),_toConsumableArray(document.getElementsByClassName("removeAndAddEl")).forEach(function(e){return e.style.display="none"}),_toConsumableArray(document.getElementsByClassName("d-flexOnFullScreen")).forEach(function(e){e.style.display="flex",e.style.flexDirection="column"}),document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen&&document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)):(t<=1001&&(document.getElementsByClassName("container-360")[0].style.paddingLeft="0"),document.getElementsByClassName("container-360")[0].style.paddingLeft="300px",document.getElementsByClassName("sidebar")[0].setAttribute("style","z-index:9;position:fixed;border-right:1px solid #ccc;justify-content:space-between"),document.getElementsByClassName("scroll-menu")[0].setAttribute("style","position:relative;left:auto;display:block;z-index:auto;"),_toConsumableArray(document.getElementsByClassName("removeAndAddEl")).forEach(function(e){return e.style.display="block"}),_toConsumableArray(document.getElementsByClassName("d-flexOnFullScreen")).forEach(function(e){return e.style.display="block"}),document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen())})})},hammerFunct:function(e){var t=new Hammer(e,{});t.get("pinch").set({enable:!0});var n=0,i=0,a=1,o=1,l=0,r=0,c=0,m=0,s="",u=e;t.on("doubletap pinch pinchend",function(e){if("doubletap"==e.type){s="translate3d(0, 0, 0) scale3d(2, 2, 1) ",o=a=2;try{"matrix(1, 0, 0, 1, 0, 0)"!=window.getComputedStyle(u,null).getPropertyValue("-webkit-transform").toString()&&(s="translate3d(0, 0, 0) scale3d(1, 1, 1) ",o=a=1)}catch(e){}u.style.webkitTransform=s,s=""}1!=a&&(n=l+e.deltaX,i=r+e.deltaY,c=Math.ceil((a-1)*u.clientWidth/2),m=Math.ceil((a-1)*u.clientHeight/2),c<n&&(n=c),n<-c&&(n=-c),m<i&&(i=m),i<-m&&(i=-m)),"pinch"==e.type&&(a=Math.max(.999,Math.min(o*e.scale,4))),"pinchend"==e.type&&(o=a),"panend"==e.type&&(l=n<c?n:c,r=i<m?i:m),1!=a&&(s="translate3d("+n+"px,"+i+"px, 0) scale3d("+a+", "+a+", 1)"),s&&(u.style.webkitTransform=s)})},sideNavToggler:function(){var e=document.querySelectorAll(".side-nav");document.getElementsByClassName("openbtn")[0].addEventListener("click",function(){document.getElementById("sidebar-toggler").classList.contains("sidebar-visible")?document.getElementById("sidebar-toggler").classList.remove("sidebar-visible"):document.getElementById("sidebar-toggler").classList.add("sidebar-visible")}),document.getElementsByClassName("closebtn")[0].addEventListener("click",function(){document.getElementById("sidebar-toggler").classList.remove("sidebar-visible")}),e.forEach(function(e){e.addEventListener("click",function(){document.getElementById("sidebar-toggler").classList.remove("sidebar-visible")})})}};window.addEventListener("load",function(){return controller.initController()});